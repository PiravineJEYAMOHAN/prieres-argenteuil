<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Horaires de pri√®re - Argenteuil & Paris</title>
  <style>
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, sans-serif;
      background: #0f172a;
      color: #e5e7eb;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }

    .container {
      display: grid;
      gap: 20px;
      grid-template-columns: repeat(2, 1fr);
      grid-template-rows: repeat(2, auto);
    }

    .card {
      background: #020617;
      border-radius: 20px;
      padding: 20px 22px;
      width: 320px;
      box-shadow: 0 18px 45px rgba(0,0,0,0.45);
      border: 1px solid #1f2937;
    }

    .title {
      font-size: 16px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: #38bdf8;
      margin-bottom: 4px;
    }

    .city {
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 8px;
    }

    .date {
      font-size: 12px;
      color: #9ca3af;
      margin-bottom: 14px;
    }

    .line {
      display: flex;
      justify-content: space-between;
      padding: 6px 0;
      font-size: 14px;
    }

    .next {
      margin-top: 10px;
      padding-top: 8px;
      border-top: 1px solid #1f2937;
      font-size: 13px;
      color: #a5b4fc;
    }
  </style>
</head>

<body>
  <div class="container">

    <!-- ARGENTEUIL AUJOURD'HUI -->
    <div class="card">
      <div class="title">Horaires de pri√®re</div>
      <div class="city">Argenteuil (Aujourd'hui)</div>
      <div class="date" id="date-arg-now"></div>

      <div class="line"><span>Fajr</span><span id="arg-now-fajr">--:--</span></div>
      <div class="line"><span>Chourouq</span><span id="arg-now-sunrise">--:--</span></div>
      <div class="line"><span>Dhouhr</span><span id="arg-now-dhuhr">--:--</span></div>
      <div class="line"><span>Asr</span><span id="arg-now-asr">--:--</span></div>
      <div class="line"><span>Maghreb</span><span id="arg-now-maghrib">--:--</span></div>
      <div class="line"><span>Icha</span><span id="arg-now-isha">--:--</span></div>

      <div class="next" id="arg-now-next"></div>
    </div>

    <!-- PARIS AUJOURD'HUI -->
    <div class="card">
      <div class="title">Horaires de pri√®re</div>
      <div class="city">Paris (Aujourd'hui)</div>
      <div class="date" id="date-par-now"></div>

      <div class="line"><span>Fajr</span><span id="par-now-fajr">--:--</span></div>
      <div class="line"><span>Chourouq</span><span id="par-now-sunrise">--:--</span></div>
      <div class="line"><span>Dhouhr</span><span id="par-now-dhuhr">--:--</span></div>
      <div class="line"><span>Asr</span><span id="par-now-asr">--:--</span></div>
      <div class="line"><span>Maghreb</span><span id="par-now-maghrib">--:--</span></div>
      <div class="line"><span>Icha</span><span id="par-now-isha">--:--</span></div>

      <div class="next" id="par-now-next"></div>
    </div>

    <!-- ARGENTEUIL DEMAIN -->
    <div class="card">
      <div class="title">Horaires de pri√®re</div>
      <div class="city">Argenteuil (Demain)</div>
      <div class="date" id="date-arg-tom"></div>

      <div class="line"><span>Fajr</span><span id="arg-tom-fajr">--:--</span></div>
      <div class="line"><span>Chourouq</span><span id="arg-tom-sunrise">--:--</span></div>
      <div class="line"><span>Dhouhr</span><span id="arg-tom-dhuhr">--:--</span></div>
      <div class="line"><span>Asr</span><span id="arg-tom-asr">--:--</span></div>
      <div class="line"><span>Maghreb</span><span id="arg-tom-maghrib">--:--</span></div>
      <div class="line"><span>Icha</span><span id="arg-tom-isha">--:--</span></div>
    </div>

    <!-- PARIS DEMAIN -->
    <div class="card">
      <div class="title">Horaires de pri√®re</div>
      <div class="city">Paris (Demain)</div>
      <div class="date" id="date-par-tom"></div>

      <div class="line"><span>Fajr</span><span id="par-tom-fajr">--:--</span></div>
      <div class="line"><span>Chourouq</span><span id="par-tom-sunrise">--:--</span></div>
      <div class="line"><span>Dhouhr</span><span id="par-tom-dhuhr">--:--</span></div>
      <div class="line"><span>Asr</span><span id="par-tom-asr">--:--</span></div>
      <div class="line"><span>Maghreb</span><span id="par-tom-maghrib">--:--</span></div>
      <div class="line"><span>Icha</span><span id="par-tom-isha">--:--</span></div>
    </div>

  </div>

  <script>

    /* üî• Fonction API sans proxy, 100% compatible GitHub */
    async function fetchTimings(cityFull, dayOffset = 0) {
      const today = new Date();
      today.setDate(today.getDate() + dayOffset);

      const d = today.getDate();
      const m = today.getMonth() + 1;
      const y = today.getFullYear();

      // timingsByAddress = plus fiable + pas de CORS
      const apiUrl =
        `https://api.aladhan.com/v1/timingsByAddress/${d}-${m}-${y}?address=${encodeURIComponent(cityFull)}&method=12`;

      const resp = await fetch(apiUrl);
      const data = await resp.json();

      return { timings: data.data.timings, dateObj: today };
    }

    function fillCard(prefix, t, dateObj) {
      const opts = { weekday: "long", year: "numeric", month: "long", day: "numeric" };
      document.getElementById(`date-${prefix}`).textContent =
        dateObj.toLocaleDateString("fr-FR", opts);

      document.getElementById(`${prefix}-fajr`).textContent = t.Fajr;
      document.getElementById(`${prefix}-sunrise`).textContent = t.Sunrise;
      document.getElementById(`${prefix}-dhuhr`).textContent = t.Dhuhr;
      document.getElementById(`${prefix}-asr`).textContent = t.Asr;
      document.getElementById(`${prefix}-maghrib`).textContent = t.Maghrib;
      document.getElementById(`${prefix}-isha`).textContent = t.Isha;
    }

    function fillNext(prefix, t) {
      const now = new Date();
      const today = now.toISOString().split("T")[0];

      const entries = [
        { name: "Fajr", time: t.Fajr },
        { name: "Dhouhr", time: t.Dhuhr },
        { name: "Asr", time: t.Asr },
        { name: "Maghreb", time: t.Maghrib },
        { name: "Icha", time: t.Isha },
      ];

      let next = null;
      for (const e of entries) {
        const date = new Date(`${today}T${e.time}:00`);
        if (date > now) { next = e; break; }
      }

      document.getElementById(`${prefix}-next`).textContent =
        next ? `Prochaine : ${next.name} √† ${next.time}` :
               "Toutes les pri√®res sont pass√©es aujourd'hui.";
    }

    async function loadAll() {

      /* ARGENTEUIL TODAY */
      const argNow = await fetchTimings("Argenteuil, France", 0);
      fillCard("arg-now", argNow.timings, argNow.dateObj);
      fillNext("arg-now", argNow.timings);

      /* PARIS TODAY */
      const parNow = await fetchTimings("Paris, France", 0);
      fillCard("par-now", parNow.timings, parNow.dateObj);
      fillNext("par-now", parNow.timings);

      /* ARGENTEUIL TOMORROW */
      const argTom = await fetchTimings("Argenteuil, France", 1);
      fillCard("arg-tom", argTom.timings, argTom.dateObj);

      /* PARIS TOMORROW */
      const parTom = await fetchTimings("Paris, France", 1);
      fillCard("par-tom", parTom.timings, parTom.dateObj);
    }

    loadAll();
  </script>

</body>
</html>
